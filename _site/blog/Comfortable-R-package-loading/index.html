<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Comfortable R package loading &#8211; GzuPark</title>
<meta name="description" content="R package의 install, update 그리고 load를 한번에!">
<meta name="keywords" content="R, package">


<!-- Twitter Cards -->
<meta name="twitter:title" content="Comfortable R package loading">
<meta name="twitter:description" content="R package의 install, update 그리고 load를 한번에!">
<meta name="twitter:site" content="@jijupax">
<meta name="twitter:creator" content="@jijupax">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://GzuPark.github.io/images/bg-yongin.jpg">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Comfortable R package loading">
<meta property="og:description" content="R package의 install, update 그리고 load를 한번에!">
<meta property="og:url" content="https://GzuPark.github.io/blog/Comfortable-R-package-loading/">
<meta property="og:site_name" content="GzuPark">





<link rel="canonical" href="https://GzuPark.github.io/blog/Comfortable-R-package-loading/">
<link href="https://GzuPark.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="GzuPark Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="https://GzuPark.github.io/assets/css/main.css">
<!-- Webfonts -->
<script src="https://use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="https://GzuPark.github.io/assets/js/vendor/html5shiv.min.js"></script>
  <script src="https://GzuPark.github.io/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="https://GzuPark.github.io/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>


<!-- MathJax -->
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="https://GzuPark.github.io/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="https://GzuPark.github.io/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="https://GzuPark.github.io/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://GzuPark.github.io/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://GzuPark.github.io/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://GzuPark.github.io/images/apple-touch-icon-144x144-precomposed.png">


<!-- google tracking -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-96195571-1', 'auto');
  ga('send', 'pageview');

</script>

</head>

<body id="post">

<div class="navigation-wrapper">
	<nav role="navigation" id="site-nav" class="animated drop">
	    <ul>
      
		    
		    <li><a href="https://GzuPark.github.io/" >Home</a></li>
		  
		    
		    <li><a href="https://GzuPark.github.io/about/" >About</a></li>
		  
		    
		    <li><a href="https://GzuPark.github.io/blog/" >Blog</a></li>
		  
		    
		    <li><a href="https://GzuPark.github.io/articles/" >Articles</a></li>
		  
		    
		    <li><a href="https://GzuPark.github.io/search/" >Search</a></li>
		  
	    </ul>
	</nav>
</div><!-- /.navigation-wrapper -->

<!--[if lt IE 9]><div class="upgrade"><strong><a href="http://whatbrowser.org/">Your browser is quite old!</strong> Why not upgrade to a different browser to better enjoy this site?</a></div><![endif]-->

<header class="masthead">
	
		<div class="wrap">
			<a href="https://GzuPark.github.io/" class="site-logo" rel="home" title="GzuPark"><img src="https://GzuPark.github.io/images/site-logo.png" width="200" height="200" alt="GzuPark logo" class="animated fadeInDown"></a>
		</div>
	
</header><!-- /.masthead -->


<div class="js-menu-screen menu-screen"></div>


<div id="main" role="main">
  <article class="hentry">
    <img src="https://GzuPark.github.io/images/bg-yongin.jpg" class="entry-feature-image" alt="Comfortable R package loading" ><p class="image-credit">Image credit: <a href="">Yong-in, Korea</a></p>
    <div class="entry-wrapper">
      <header class="entry-header">
        <ul class="entry-tags">
          <li><a href="https://GzuPark.github.io/tags/#R" title="Pages tagged R">R</a></li><li><a href="https://GzuPark.github.io/tags/#package" title="Pages tagged package">package</a></li>
        </ul>
        
          <h1 class="entry-title">Comfortable R package loading</h1>
        
      </header>
      <footer class="entry-meta">
        
        
          <img src="https://GzuPark.github.io/images/bio-photo.jpg" class="bio-photo" alt="Jongmin Park bio photo"></a>
        
        <span class="author vcard">By <span class="fn">Jongmin Park</span></span>
        <span class="entry-date date published"><time datetime="2017-02-20T00:00:00+09:00"><i class="fa fa-calendar-o"></i> February 20, 2017</time></span>
        <span class="entry-date date modified"><time datetime="2017-03-22"><i class="fa fa-pencil"></i> March 22, 2017</time></span>
        <span class="entry-comments"><i class="fa fa-comment-o"></i> <a href="#disqus_thread">Comment</a></span>
        <span class="social-share-twitter">
  <a href="https://twitter.com/intent/tweet?hashtags=R,package&amp;text=Comfortable%20R%20package%20loading&amp;url=https://GzuPark.github.io/blog/Comfortable-R-package-loading/&amp;via=jijupax" title="Share on Twitter" itemprop="Twitter"><i class="fa fa-twitter-square"></i> Tweet</a>
</span>
<span class="social-share-facebook">
  <a href="https://www.facebook.com/sharer/sharer.php?u=https://GzuPark.github.io/blog/Comfortable-R-package-loading/" title="Share on Facebook" itemprop="Facebook"><i class="fa fa-facebook-square"></i> Like</a>
</span>
<span class="social-share-googleplus">
  <a href="https://plus.google.com/share?url=https://GzuPark.github.io/blog/Comfortable-R-package-loading/" title="Share on Google Plus" itemprop="GooglePlus"><i class="fa fa-google-plus-square"></i> +1</a>
</span>
<!-- /.social-share -->
        
      </footer>
      <div class="entry-content">
        <h3 id="section">1. 서론</h3>

<p>이 글을 읽는 사람들은 R의 package를 사용할때 생기는 사소한 불편함에 공감을 가질 것으로 생각된다.</p>

<ul>
  <li>install 할 package개수가 많은데 설치여부가 확실하지 않아 시간을 낭비할 때</li>
  <li>현재 불러온 package를 중복으로 로드하는 것을 피하려고 할때</li>
  <li>오랜만에 사용하는 package의 새로운 version이 나왔는데 모르고 지나칠때</li>
</ul>

<p>이런 상황들 이외에도 다양한 상황을 한번쯤은 느껴봤을 것이라고 생각한다.
심지어 R, RStudio의 update를 매일 확인하지 않는다면 새로운 기능을 모르고 지나치거나 bug fix가 되지 않은 상태로 작업을 하는 것은 아쉽지 않을까?
매일 아니 매번 이런 환경을 확인하는 분들이라면 모르겠지만 필자처럼 깜박하는 사람들을 위해 <strong><a href="https://gzupark.github.io/usefulcode/autoload.R"><font color="red">code</font></a></strong> 를 작성해보았다.</p>

<h3 id="section-1">2. 흐름도</h3>

<center><figure><img src="https://GzuPark.github.io/images/blog-2017-02-20/flowchart.jpg" /><figcaption><b>그림 1</b></figcaption></figure></center>

<p>흐름도의 내용을 목록화 한다면, <br /></p>
<ol>
  <li>사용할 package를 입력 <br /></li>
  <li>install 되어 있는가 확인 <br /></li>
  <li>latest version 을 확인 <br /></li>
  <li>필요한 package를 install <br /></li>
  <li>현재 load 되어 있는가 확인 <br /></li>
  <li>필요한 package load <br /></li>
</ol>

<p>이렇게 대략 6단계로 구성되어 있다는 것을 알 수 있을 것이다. 이렇게 흐름도를 그린다던가 아래와 같이 구조를 알 수 있는 간략한 명령어로된 식을 구성해 보는 것이 좋다.</p>

<center><figure><img src="https://GzuPark.github.io/images/blog-2017-02-20/codebyhand.jpg" /><figcaption><b>그림 2</b> </figcaption></figure></center>

<h3 id="section-2">3. 본론</h3>

<h4 id="package-">설치 안된 package 목록</h4>
<p>사용할 package 목록 중에 설치가 안된 package의 목록을 만든다.</p>
<div class="language-R highlighter-rouge"><pre class="highlight"><code><span class="n">new.pkg</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">pkg</span><span class="p">[</span><span class="o">!</span><span class="p">(</span><span class="n">pkg</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="n">installed.packages</span><span class="p">()[,</span><span class="s2">"Package"</span><span class="p">])]</span><span class="w">
</span></code></pre>
</div>

<h5 id="package--1">3.1. 업데이트가 필요한 package 목록</h5>
<p>최신 버전이 아닌 업데이트가 필요한 package의 목록을 <code class="highlighter-rouge">new.pkg</code>에 추가한다.</p>
<div class="language-R highlighter-rouge"><pre class="highlight"><code><span class="n">old.pkg</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">pkg</span><span class="p">[</span><span class="n">pkg</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="n">old.packages</span><span class="p">()]</span><span class="w">
</span><span class="k">if</span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">old.pkg</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="n">new.pkg</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">new.pkg</span><span class="p">,</span><span class="w"> </span><span class="n">old.pkg</span><span class="p">)</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h5 id="packge-">3.2. packge 설치</h5>
<p><code class="highlighter-rouge">new.pkg</code> 목록에 1개 이상의 package가 있다면 설치를 진행한다.</p>
<div class="language-R highlighter-rouge"><pre class="highlight"><code><span class="k">if</span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">new.pkg</span><span class="p">))</span><span class="w"> </span><span class="n">install.packages</span><span class="p">(</span><span class="n">new.pkg</span><span class="p">)</span><span class="w">
</span></code></pre>
</div>

<h5 id="packge--1">3.3. packge 불러오기</h5>
<p>현재 session에서 이미 불러온 package를 제외하고 아직 불러오지 않은 package를 차례로 불러온다.</p>
<div class="language-R highlighter-rouge"><pre class="highlight"><code><span class="n">loaded.pkg</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">search</span><span class="p">()[</span><span class="n">search</span><span class="p">()</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="n">paste0</span><span class="p">(</span><span class="s2">"package:"</span><span class="p">,</span><span class="w"> </span><span class="n">pkg</span><span class="p">)]</span><span class="w">
    </span><span class="n">loaded.pkg</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">substring</span><span class="p">(</span><span class="n">loaded.pkg</span><span class="p">,</span><span class="w"> </span><span class="m">9</span><span class="p">)</span><span class="w">
    </span><span class="n">load.pkg</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">pkg</span><span class="p">[</span><span class="o">!</span><span class="p">(</span><span class="n">pkg</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="n">loaded.pkg</span><span class="p">)]</span><span class="w">
    </span><span class="k">if</span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">load.pkg</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="nf">length</span><span class="p">(</span><span class="n">load.pkg</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="n">library</span><span class="p">(</span><span class="n">load.pkg</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">character.only</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<h3 id="section-3">4. 결론</h3>
<p><code class="highlighter-rouge">autoload()</code> 라는 함수 하나로 package의 install, update 확인, load까지 해결하는 편리한 기능이라고 생각한다. 그렇지만 <code class="highlighter-rouge">update.packages()</code> 함수를 활용한다면 <code class="highlighter-rouge">autoload()</code> 안의 update list 부분은 생략해도 될 것이다. 매번 세션을 시작하거나 파일을 새로 만들 때 필자의 github에 올려놓은 <a href="https://raw.githubusercontent.com/GzuPark/usefulcode/master/autoload.R"><code class="highlighter-rouge">autoload.R</code></a> 파일을 불러와서 활용할 수도 있고, 또는 기본 환경에서 실행되도록 설정해놓는 것도 방법일 것이다.</p>

<h3 id="reference">Reference</h3>
<ul>
  <li><a href="https://cran.r-project.org/web/packages/available_packages_by_name.html">R package</a>의 종류는 매우 다양하며 현재 <strong>10105</strong> 개가 있다. (2017-02-20, http://cran.nexr.com/)</li>
  <li><a href="https://stat.ethz.ch/R-manual/R-devel/library/utils/html/available.packages.html">available.packages()</a></li>
  <li><a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/library.html">library()</a></li>
  <li><a href="https://stat.ethz.ch/R-manual/R-devel/library/utils/html/update.packages.html">old.packages()</a></li>
  <li><a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/search.html">search()</a></li>
</ul>

        
          <div id="disqus_thread"></div><!-- /#disqus_thread -->
          
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'gzupark'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
      
        <a href="https://GzuPark.github.io/articles/Why-Anaconda-How-to-control-Anaconda/" class="btn" title="Why Anaconda? How to control Anaconda?">Next</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    

<span>&copy; 2017 Jongmin Park. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/so-simple-jekyll-theme/" rel="nofollow">So Simple Theme</a>.</span>
<div class="social-icons">
	<a href="https://twitter.com/jijupax" title="Jongmin Park on Twitter" target="_blank"><i class="fa fa-twitter-square fa-2x"></i></a>
	<a href="https://facebook.com/jijupax" title="Jongmin Park on Facebook" target="_blank"><i class="fa fa-facebook-square fa-2x"></i></a>
	
	<a href="https://linkedin.com/in/jijupax" title="Jongmin Park on LinkedIn" target="_blank"><i class="fa fa-linkedin-square fa-2x"></i></a>
	
	
	
	<a href="https://github.com/GzuPark" title="Jongmin Park on Github" target="_blank"><i class="fa fa-github-square fa-2x"></i></a>
	
  
	
  <a href="https://GzuPark.github.io/feed.xml" title="Atom/RSS feed"><i class="fa fa-rss-square fa-2x"></i></a>
</div><!-- /.social-icons -->

  </footer>
</div><!-- /.footer-wrapper -->

<script type="text/javascript">
  var BASE_URL = 'https://GzuPark.github.io';
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="https://GzuPark.github.io/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="https://GzuPark.github.io/assets/js/scripts.min.js"></script>




<!-- mathjax -->
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

</body>
</html>
